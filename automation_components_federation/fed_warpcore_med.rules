// ST-AFA Federation: Medium Warpcore Automation Component
// Allows the stafa.fed_warpcore_med part to work with AI cores

PartCrew
{
    Type = MultiToggle
    Toggles = [PartCrewMinusNone, PartCrewMinusOne, PartCrewMinusTwo, NeedsCrewMinusThree]
    Mode = Any
}

// --- Buff Level Toggles ---
NeedsCrewMinusOne
{
    Type = BuffToggle
    BuffType = Aredja2AITerminal
    MinBuffValue = 1
    MaxBuffValue = 1
}

NeedsCrewMinusTwo
{
    Type = BuffToggle
    BuffType = Aredja2AITerminal
    MinBuffValue = 2
    MaxBuffValue = 2
}

NeedsCrewMinusThree
{
    Type = BuffToggle
    BuffType = Aredja2AITerminal
    MinBuffValue = 3
}

// --- Gate for Standard Crew (3 crew) ---
NeedsCrewMinusNone
{
    Type = MultiToggle
    Toggles = [NeedsCrewMinusOne, NeedsCrewMinusTwo, NeedsCrewMinusThree]
    Mode = Any
    Invert = True
}

// --- Crew Configurations ---
PartCrewMinusNone
{
    Type = PartCrew
    Crew = 3
    DefaultPriority = &/PRIORITIES/ControlRoom_Crew
    PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusNone]
    HighPriorityPrerequisites = [BatteryStorage]
    CrewDestinations
    [
        [1.4, 1.2]
        [2.6, 3.7]
        [4.5, 1.2]
    ]
    CrewLocations
    [
        CrewLocation1
        CrewLocation2
        CrewLocation3
    ]
}

PartCrewMinusOne
{
    Type = PartCrew
    Crew = 2
    DefaultPriority = &/PRIORITIES/ControlRoom_Crew
    PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusOne]
    HighPriorityPrerequisites = [BatteryStorage]
    OverridePriorityKey = PartCrewMinusNone
    CrewDestinations
    [
        [1.4, 1.2]
        [2.6, 3.7]
    ]
    CrewLocations
    [
        CrewLocation1
        CrewLocation2
    ]
}

PartCrewMinusTwo
{
    Type = PartCrew
    Crew = 1
    DefaultPriority = &/PRIORITIES/ControlRoom_Crew
    PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusTwo]
    HighPriorityPrerequisites = [BatteryStorage]
    OverridePriorityKey = PartCrewMinusNone
    CrewDestinations
    [
        [1.4, 1.2]
    ]
    CrewLocations
    [
        CrewLocation1
    ]
}

// Crew locations from original part (corrected to match PartCrewMinusNone.CrewDestinations)
CrewLocation1 { Type = CrewLocation; Location = [1.4, 1.2] }
CrewLocation2 { Type = CrewLocation; Location = [2.6, 3.7] }
CrewLocation3 { Type = CrewLocation; Location = [4.5, 1.2] } 