Part : <./Data/ships/terran/base_part_terran.rules>/Part
{
	NameKey = "Parts/Aredja2AITerminal"
	IconNameKey = "Parts/Aredja2AITerminalIcon"
	DescriptionKey = "Parts/Aredja2AITerminalDesc"
	ID = aredja.parts.ai_core
	EditorGroup = "Crew"
	Resources
	[
		[steel, 8]
		[coil, 16]
		[processor, 4]
	]
	Size = [1, 1]
	MaxHealth = 1000
	TypeCategories = [corridor, uses_power]
	ReceivableBuffs : ^/0/ReceivableBuffs []
	IsRotateable = true
	IsWalled = false
	IsSelfDestructible = true
	GeneratorRequiresDoor = false
	IgnoreRotationForMirroredSelection = false
	EditorIcon
	{
		Texture
		{
			File = "icon.png"
			SampleMode = Linear
		}
		Size = [32, 32]
	}
	Components : ^/0/Components
	{
		IsOperational
		{
			Type = MultiToggle
			Toggles = [PowerToggle, BatteryStorage]
			Mode = All
		}

		PowerToggle
		{
			Type = UIToggle
			ToggleID = "on_off"
			Default = 1
			RequiresCommand = false
		}

		CommandConsumer
		{
			Type = CommandConsumer
			OperationalToggle = PowerToggle
			CommandPoints = 8
		}

		BatteryStorage
		{
			Type = ResourceStorage
			ResourceType = battery
			MaxResources = 2000
		}

		BatteryConsumer
		{
			Type = ResourceConsumer
			ResourceType = battery
			Storage = BatteryStorage
			DefaultPriority = 8
			ResupplyThreshold = 500
			OperationalToggle = PowerToggle
		}

		PowerDrain
		{
			Type = ResourceConverter
			OperationalToggle = IsOperational
			FromStorage = BatteryStorage
			FromQuantity = 1000
			MinFromQuantityForConversion = 1
			Interval = 150
		}

		BuffProvider
		{
			Type = AreaBuffProvider
			BuffType = Aredja2AITerminal
			BuffArea = [0, -1, 1, 1]
			BuffAmount = 1
			Criteria
			{
				Category = is_crewed
			}
			OperationalToggle = IsOperational
			ChainsFromBuffType = Aredja2AITerminal
		}

		Graphics
		{
			Type = Graphics
			Location = [.5, .5]
			Floor = &<./Data/ships/terran/corridor/corridor.rules>/Part/Components/Graphics/Floor
			Roof = &<./Data/ships/terran/corridor/corridor.rules>/Part/Components/Graphics/Roof
			OperationalDoodad
			{
				Layer = "doodads_low"
				DamageLevels
				[
					{
						File = "doodads_on.png"
						Size = [1, 1]
					}
				]
			}
			NonOperationalDoodad
			{
				Layer = "doodads_high"
				DamageLevels
				[
					{
						File = "doodads_off.png"
						Size = [1, 1]
					}
				]
			}
		}

		DestroyedEffects
		{
			Type = DeathEffects
			MediaEffects = &/COMMON_EFFECTS/SmallPartDestroyedDry
			Location = [.5, .5]
		}

		Blueprints
		{
			Type = BlueprintSprite
			File = "blueprints.png"
			Size = [1, 1]
		}

		WallsBlend = &<./Data/ships/terran/corridor/corridor.rules>/Part/Components/WallsBlend
		BlueprintWalls = &<./Data/ships/terran/corridor/corridor.rules>/Part/Components/BlueprintWalls

		BatterySprites
		{
			Type = ResourceSprites
			Location = [.5, .5]
			ResourceStorage = BatteryStorage
			Layer = "doodads_high"
			ResourceLevels
			[
				{
					File = "batteries1.png"
					Size = [1, 1]
				}
				{
					File = "batteries2.png"
					Size = [1, 1]
				}
			]
		}
	}

	Stats
	{
		PowerUsageContinuousMinutes = (&~/Part/Components/PowerDrain/FromQuantity) / (&~/Part/Components/PowerDrain/Interval) / 1000 * 60
		PowerCapacity = (&~/Part/Components/BatteryStorage/MaxResources) / 1000
		RecPower = (&PowerUsageContinuousMinutes) / 60
		RecCrew = (&RecPower) * 4

		Aredja2OperatingPower = &~/Part/Components/BuffProvider/BuffAmount
	}
}
