// Resonance Beam Turret Automation Component
// This component allows the resonance beam turret to work with AI cores
// It can operate with 4, 3, 2, 1, or 0 crew members depending on AI core buffs

// Main PartCrew component - determines which crew mode to use based on AI buffs
PartCrew
{
	Type = MultiToggle
	Toggles = [PartCrewMinusNone, PartCrewMinusOne, PartCrewMinusTwo, PartCrewMinusThree, PartCrewMinusFour]
	Mode = Any
}

// This toggle activates when no AI core buff is detected
NeedsCrewMinusNone
{
	Type = MultiToggle
	Toggles = [NeedsCrewMinusOne, NeedsCrewMinusTwo, NeedsCrewMinusThree, PartCrewMinusFour]
	Mode = Any
	Invert = True
}

// Standard crew component - requires 4 crew members when no AI is available
PartCrewMinusNone
{
	Type = PartCrew
	Crew = 4
	DefaultPriority = &/PRIORITIES/Weapon_Crew
	PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusNone]
	HighPriorityPrerequisites = [BatteryStorage]
	CrewDestinations
	[
		[69/64, 129/64]
		[187/64, 129/64]
		[82/64, 178/64]
		[174/64, 178/64]
	]
	CrewLocations
	[
		CrewLocation1
		CrewLocation2
		CrewLocation3
		CrewLocation4
	]
}

// This toggle activates when exactly 1 AI core buff is detected
NeedsCrewMinusOne
{
	Type = BuffToggle
	BuffType = Aredja2AITerminal
	MaxBuffValue = 1
	MinBuffValue = 1
}

// Hybrid crew component - requires 3 crew members and 1 AI core
PartCrewMinusOne
{
	Type = PartCrew
	Crew = 3
	DefaultPriority = &/PRIORITIES/Weapon_Crew
	PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusOne]
	HighPriorityPrerequisites = [BatteryStorage]
	OverridePriorityKey = PartCrewMinusNone
	CrewDestinations
	[
		[69/64, 129/64]
		[187/64, 129/64]
		[82/64, 178/64]
		[174/64, 178/64]
	]
	CrewLocations
	[
		CrewLocation1
		CrewLocation2
		CrewLocation3
		CrewLocation4
	]
	SwitchLocationInterval = [5, 10]
}

// This toggle activates when exactly 2 AI core buffs are detected
NeedsCrewMinusTwo
{
	Type = BuffToggle
	BuffType = Aredja2AITerminal
	MaxBuffValue = 2
	MinBuffValue = 2
}

// Hybrid crew component - requires 2 crew members and 2 AI cores
PartCrewMinusTwo
{
	Type = PartCrew
	Crew = 2
	DefaultPriority = &/PRIORITIES/Weapon_Crew
	PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusTwo]
	HighPriorityPrerequisites = [BatteryStorage]
	OverridePriorityKey = PartCrewMinusNone
	CrewDestinations
	[
		[69/64, 129/64]
		[187/64, 129/64]
		[82/64, 178/64]
		[174/64, 178/64]
	]
	CrewLocations
	[
		CrewLocation1
		CrewLocation2
		CrewLocation3
		CrewLocation4
	]
	SwitchLocationInterval = [5, 10]
}

// This toggle activates when exactly 3 AI core buffs are detected
NeedsCrewMinusThree
{
	Type = BuffToggle
	BuffType = Aredja2AITerminal
	MaxBuffValue = 3
	MinBuffValue = 3
}

// Hybrid crew component - requires 1 crew member and 3 AI cores
PartCrewMinusThree
{
	Type = PartCrew
	Crew = 1
	DefaultPriority = &/PRIORITIES/Weapon_Crew
	PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusThree]
	HighPriorityPrerequisites = [BatteryStorage]
	OverridePriorityKey = PartCrewMinusNone
	CrewDestinations
	[
		[69/64, 129/64]
		[187/64, 129/64]
		[82/64, 178/64]
		[174/64, 178/64]
	]
	CrewLocations
	[
		CrewLocation1
		CrewLocation2
		CrewLocation3
		CrewLocation4
	]
	SwitchLocationInterval = [5, 10]
}

// Fully automated mode - activates when at least 4 AI core buffs are detected
// When activated, no crew members are required to operate this component
PartCrewMinusFour
{
	Type = BuffToggle
	BuffType = Aredja2AITerminal
	MinBuffValue = 4
} 