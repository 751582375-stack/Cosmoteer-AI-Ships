// Missile Silo (Galactic Allegiance) Automation Component
// Allows the missile silo to work with AI cores

PartCrew
{
	Type = MultiToggle
	Toggles = [PartCrewMinusNone, PartCrewMinusOne, PartCrewMinusTwo]
	Mode = Any
}

NeedsCrewMinusNone
{
	Type = MultiToggle
	Toggles = [NeedsCrewMinusOne, PartCrewMinusTwo]
	Mode = Any
	Invert = True
}

NeedsCrewMinusOne
{
	Type = MultiToggle
	Toggles = [PartCrewMinusTwo]
	Mode = Any
	Invert = True
}

AI_CorrectedMissilePrereqProxy
{
	Type = ToggleProxy
	ComponentID = HEMissilesComponents/Components/MissilesPrereq // Path to the MultiToggle within the HE missile type
}

// Requires 2 crew when no AI buff
PartCrewMinusNone
{
	Type = PartCrew
	Crew = 2
	DefaultPriority = &/PRIORITIES/Weapon_Crew
	PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusNone]
	HighPriorityPrerequisites = [AI_CorrectedMissilePrereqProxy]
	CrewDestinations
	[
		[.54, 2.44]
		[1.46, 2.44]
	]
	CrewLocations
	[
		CrewLocation1
		CrewLocation2
	]
}

// Requires 1 crew when one AI buff present
PartCrewMinusOne
{
	Type = PartCrew
	Crew = 1
	DefaultPriority = &/PRIORITIES/Weapon_Crew
	PrerequisitesBeforeCrewing = [PowerToggle, NeedsCrewMinusOne]
	OverridePriorityKey = PartCrewMinusNone
	HighPriorityPrerequisites = [AI_CorrectedMissilePrereqProxy]
	CrewDestinations
	[
		[.54, 2.44]
	]
	CrewLocations
	[
		CrewLocation1
	]
}

// No crew needed when two or more AI buffs present
PartCrewMinusTwo
{
	Type = BuffToggle
	BuffType = Aredja2AITerminal
	MinBuffValue = 2
}

// Crew locations
CrewLocation1 { Type = CrewLocation; Location = [.54, 2.44]; Rotation = -135d }
CrewLocation2 { Type = CrewLocation; Location = [1.46, 2.44]; Rotation = 135d }